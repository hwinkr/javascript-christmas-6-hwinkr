# 기능 명세서

## 해결해야 하는 현실 문제

기능 요구 사항을 모두 읽은 후, 해결해야 하는 현실 문제를 요약해서 정리했습니다

> 12월 N일에 사용자가 우테코 식당에 방문하기 위해 예약을 하려고 한다.
> 주문 정보(음식 메뉴, 주문 수량)를 입력 했을 때, 사용자는 어떤 이벤트 혜택을 얻을 수 있나?

# 설계도

![image](https://github.com/hwinkr/javascript-christmas-6-hwinkr/assets/68489467/5b1cea90-4e3b-451b-9b5f-11595147ebe1)

# Domain

## 1. `Menu`

> `Menu` 도메인은 사용자가 주문한 메뉴 하나를 표현합니다.
> Menu의 타입에 따라서 평일, 주말 할인이 적용되는지 되지 않는지가 결정되기 때문에
> Menu의 타입을 구하고 타입에 따라서 할인 여부를 결정하는 것을 `Menu` 도메인 로직으로 구현하기로 했습니다.

### Menu 도메인에 대한 고민

평일, 주말에 영향을 받는 메뉴(디저트, 메인)과 평일, 주말에 영향을 받지 않는 메뉴를 구분해서 클래스를 만드는 것은 어떨까에 대해 고민했습니다.

→ 평일, 주말에 영향을 받는 메뉴를 클래스로 표현했을 경우 할인 가격을 계산하는 도메인 로직이 포함되겠지만 영향을 받지 않는 메뉴를 클래스로 표현했을 경우 getter, setter 역할밖에 하지 않을 것 같다는 생각을 했습니다. 이 메뉴들은 평일, 주말에 대해서 추가 할인이 없기 때문에 할인과 관련된 도메인 로직이 없을 것이고 오직 데이터(메뉴 이름, 메뉴 타입, 메뉴 수량)만 가질 것이기 때문에 객체는 일을 하지 않고 데이터만 표현하게 됩니다. 3주차 공통 피드백에서도 확인할 수 있듯이, 이를 지양하기로 했습니다.

하지만 만약 평일, 주말에 영향을 받지 않는 메뉴들에 대해서 다른 할인이 적용되고 할인 로직이 평일, 주말에 영향을 받는 메뉴들과 다르다면 클래스 분리를 고민해볼 수 있을 듯 합니다.

- [ ] 메뉴는 **날짜로 결정되는 할인 정보**에 따라서, 할인이 달라진다 → 한 메뉴에 대해서 적용되는 할인은 메뉴 클래스의 책임으로 한다.
- [ ] Menu 클래스는 메뉴의 타입을 구분한다.
- [ ] 타입에 따라서 할인을 적용할지 말지 결정한다.
- [ ] 메뉴의 타입, 할인 정보에 따라서 할인 결과를 반환한다.

```jsx
class Menu {
  #name;
  #amount;

  constructor() {
    //...
  }

  #메뉴타입구하기() {
    //...
  }

  #메뉴할인적용여부결정하기() {}

  메뉴할인정보구하기() {}
}
```

## 2. `Restaurant`

> `Restaurant` 도메인은 주문을 받아서, 음식을 만드는 식당(우테코 식당 역할)을 표현합니다.
> 사용자의 주문에 대해서 유효성을 검증하고, 주문 정보에 따라 음식을 만들어주는 것을 `Restaurant` 의 도메인 로직으로 구현하기로 했습니다.

- [ ] 식당은 주문 정보에 따라 음식을 만들어주는 책임을 가짐
- [ ] 사용자의 주문에 대한 유효성을 검증
  - 고객이 메뉴판에 없는 메뉴를 입력하는 경우,
  - 메뉴의 개수는 1 이상의 숫자만 입력되도록 해주세요.
  - 메뉴 형식이 예시와 다른 경우
  - 중복 메뉴를 입력한 경우(e.g. 시저샐러드-1,시저샐러드-1)
  - 음료만 주문 시, 주문할 수 없습니다.
  - 메뉴는 한 번에 최대 20개까지만 주문할 수 있습니다.(e.g. 시저샐러드-1, 티본스테이크-1, 크리스마스파스타-1, 제로콜라-3, 아이스크림-1의 총개수는 7개)

```jsx
class Restaurant {
  constructor() {
    //...
  }

  #validate() {
    //...
  }

  #음식만들기() {
    //...
  }
}
```

## 3. `VisitDate`

> `VisitDate` 도메인은 사용자가 우테코 식당에 방문하는 날짜를 표현합니다.
> 방문 날짜에 따라서 할인 정보가 변하기 때문에, 날짜에 따라서 할인 정보를 구하는 것과 날짜에 대한 유효성을 검증하는 것을 `VisitDate` 도메인 로직으로 구현하기로 했습니다.

- [ ] 날짜의 유효성을 검증한다.
- [ ] 날짜는 할인을 결정한다. → Date 클래스는 날짜를 통해서 할인을 결정해야 할 책임이 있다.
- [ ] 날짜를 통해서 판단되는 할인은 외부에서 변경할 수 없어야 한다. → Objec.freeze를 사용하자

```jsx
const discountInfo = Object.freeze({
  // 평일 할인, 주말 할인을 구분
  // 크리스마스 디데이 할인 계산
  // 특별할인 유무 판단
});
```

```jsx
class Date{
	#day

	constructor(day){
		#validate(day)
		this.#day = day;

	#validate(){
		//...
	}

	할인정보구하기(){
		//...

		return discountInfo;
	}
}
```

## 4. `EventResult`

> `EventResult` 도메인은 우테코 크리스마스 이벤트의 결과를 표현합니다.
> 할인 정보와 주문한 메뉴에 따라서 **증정 메뉴**, **혜택 내역**, **총 혜택 금액**을 계산하고 반환하는 도메인 로직을 구현하기로 했습니다.

### `Restaurant` 도메인에 대한 고민

`Restaurant` 은 우테코 식당을 표현하고, 이벤트를 주최한 도메인이기 때문에 이벤트의 결과를 구하는 도메인 로직 또한 `Restaurant` 도메인 내부에 있어야 하지 않을까에 대한 고민을 했습니다.

우선은 메뉴를 생성하는 식당과, 이벤트의 결과를 구하는 객체는 충분히 다른 객체로 구분할 수 있을 것이라는 생각이 들어 구분해서 표현하고 구현하면서 계속해서 고민해보려 합니다

## EventManager

> `EventManager` 는 `Menu`, `Restaurant`, `VisitDate`, `EventResult` 도메인 로직을 사용해서 크리스마스 이벤트를 진행합니다.

이 클래스는 `Menu`, `Restaurant`, `VisitDate`, `EventResult` 에서 이미 구현된 도메인 로직을 호출하는 역할만 하며 추가적인 도메인 로직을 구현하지는 않습니다.

# UI

## InputView

- [ ] 방문 날짜 입력받기
- [ ] 주문 메뉴 입력받기

## OutputView

- [ ] 주문 메뉴 출력하기
- [ ] 할인 전 총주문 금액, 증정 메뉴, 혜택 내역, 총혜택 금액, 할인 후 예상 결제 금액, 12월 이벤트 배지 출력하기

# 기타

- [ ] [고객에게 안내할 이벤트 주의 사항](https://github.com/hwinkr/javascript-christmas-6-hwinkr#%EA%B3%A0%EA%B0%9D%EC%97%90%EA%B2%8C-%EC%95%88%EB%82%B4%ED%95%A0-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD)을 어떻게 활용할지 결정하기
  - 출력 메세지로 활용?
  - 유효성 검사에 활용?
- [ ] 입력값이 유효하지 않을 경우 재입력을 받을 수 있도록 하는 유틸함수 구현하기
- [ ] 객체 불변성을 유지할 수 있도록 `deepFreeze` 유틸함수 구현하기
- [ ] 크리스마스 이벤트와 관련된 메시지들을 상수 객체로 설정하기
